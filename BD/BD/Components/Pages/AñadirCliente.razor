@page "/clientes/nuevo"
@rendermode InteractiveServer
@using BD.Modelos.Repositorio
@using BD.Modelos
@inject NavigationManager Navegador
@inject IRepositorio Repositorio

<PageTitle>Añadir Cliente</PageTitle>
<h3>Ingrese los datos del cliente</h3>

<EditForm Model="@cliente" OnValidSubmit="GuardarCliente">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="nombre">Nombre</label>
        <InputText id="nombre" class="form-control" @bind-Value="cliente.Nombre" />
        <ValidationMessage For="@(() => cliente.Nombre)" />
    </div>

    <div class="form-group">
        <label for="apellido">Apellido</label>
        <InputText id="apellido" class="form-control" @bind-Value="cliente.Apellido" />
        <ValidationMessage For="@(() => cliente.Apellido)" />
    </div>

    <div class="form-group">
        <label for="apellido">Teléfono</label>
        <InputText id="telefono" class="form-control" @bind-Value="cliente.Teléfono" />
        <ValidationMessage For="@(() => cliente.Teléfono)" />
    </div>

    <div class="form-group">
        <label for="correo">Correo</label>
        <InputText id="correo" class="form-control" @bind-Value="cliente.Correo" />
        <ValidationMessage For="@(() => cliente.Correo)" />
    </div>

    <div class="form-group">
        <label for="direccion">Dirección</label>
        <InputText id="direccion" class="form-control" @bind-Value="cliente.Dirección" />
        <ValidationMessage For="@(() => cliente.Dirección)" />
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
</EditForm>

@code {
    private Cliente cliente = new Cliente();

    private async void GuardarCliente()
    {
        await Repositorio.AddCliente(cliente);
        Navegador.NavigateTo("/clientes");
    }
}